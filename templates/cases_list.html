{% extends 'base.html' %}
{% block content %}
<div class="d-flex align-items-center mb-3 gap-2">

<a href="?" class="btn btn-outline-secondary btn-sm {% if not status %}active{% endif %}">Alle</a>
<a href="?status=SENT_CLINIC" class="btn btn-outline-secondary btn-sm {% if status == 'SENT_CLINIC' %}active{% endif %}">Gesendet</a>
<a href="?status=RECEIVED_BY_LAB" class="btn btn-outline-secondary btn-sm {% if status == 'RECEIVED_BY_LAB' %}active{% endif %}">Im Labor</a>
<a href="?status=RETURNED_BY_LAB" class="btn btn-outline-secondary btn-sm {% if status == 'RETURNED_BY_LAB' %}active{% endif %}">Zurück</a>
<a href="?status=RECEIVED_BY_CLINIC" class="btn btn-outline-secondary btn-sm {% if status == 'RECEIVED_BY_CLINIC' %}active{% endif %}">Abgeschlossen</a>
<form method="get" class="ms-auto d-flex gap-2">
{% if status %}<input type="hidden" name="status" value="{{ status }}">{% endif %}
<input name="q" value="{{ q }}" class="form-control form-control-sm" placeholder="Suche (Fall/Patient)">
<button class="btn btn-primary btn-sm">Suchen</button>
</form>
</div>
<table class="table table-striped table-hover align-middle">
<thead><tr><th>Fall</th><th>Patient</th><th>Geburtsdatum</th><th>Labor</th><th>Status</th><th></th></tr></thead>
<tbody>
{% for c in cases %}
<tr>
<td>{{ c.case_code }}</td>
<td>{{ c.patient_name }}</td>
<td>{{ c.patient_dob|date:'d.m.Y' }}</td>
<td>{{ c.lab }}</td>
<td>{{ c.get_status_display }}</td>
<td><a class="btn btn-sm btn-outline-primary" href="/cases/{{ c.id }}/">Öffnen</a></td>
</tr>
{% empty %}
<tr><td colspan="6" class="text-muted">Keine Fälle</td></tr>
{% endfor %}
</tbody>
</table>
{% endblock %}